input {
  beats {
    port => "5000"
  }
}



  filter {
      grok {
          match => {
              "message" => [
                  "%{TIMESTAMP_ISO8601:timestamp};%{WORD:thread};%{WORD:action} %{WORD:job_type} Job Wfd ID:%{NUMBER:wfd_id} JobId:%{NUMBER:job_id} JobType:%{WORD:job_type} Runtime:%{NUMBER:runtime} Queued:%{NUMBER:queued} Total:%{NUMBER:total}",
                  "%{TIMESTAMP_ISO8601:timestamp};%{WORD:action};%{NUMBER:number};%{GREEDYDATA:connection_type} to %{IP:target_ip}:%{NUMBER:target_port}",
                  "%{TIMESTAMP_ISO8601:timestamp};%{GREEDYDATA:connection_type} to %{IP:target_ip}:%{NUMBER:target_port}",
                  "%{TIMESTAMP_ISO8601:timestamp};%{WORD:process_id};%{NUMBER:pid};%{WORD:status_code};%{NUMBER:status_num}",
                  "%{TIMESTAMP_ISO8601:timestamp};%{WORD:process_id};%{NUMBER:pid};%{WORD:status_code}*",
                  "%{TIMESTAMP_ISO8601:timestamp};.*"
              ]
          }
      }

      date {
          match => ["timestamp", "ISO8601"]
          timezone => "Europe/Berlin"
          target => "@timestamp"
          remove_field => ["timestamp"]
      }
  }


output {
  stdout { codec => rubydebug }
  opensearch {
    hosts => ["http://opensearch:9200"]
    index => "ilgmc-test"
    user => "admin"
    password => "admin"
    ssl => false
    ssl_certificate_verification => false
  }

}
